{% extends "master_funcionario.html" %}
{% load staticfiles %}
{% block titulo %} Bem-vindo, Funcionário {% endblock %}
{% block master %}
    <div class="row">
        <div class="col m6 hide-on-small-and-down">
            <h6 class="uppercase texto_text flow-text_3">há <span class="principal_v_text">10 pessoas </span> na fila de espera</h6>
        </div>
        <div class="col s12 m6">
            <button id="play" onclick="Materialize.toast('Chamando cliente', 2000);" class="tooltipped right secundaria2_text btn-flat" data-position="left" data-delay="50" data-tooltip="Iniciar fila"><i class="fa fa-play-circle-o font80" aria-hidden="true"></i></button>
            <button id="paus" class="hide tooltipped right secundaria2_text btn-flat" data-position="left" data-delay="50" data-tooltip="Pausar fila"><i class="fa fa-pause-circle-o font80" aria-hidden="true"></i></button>
        </div>
    </div>
    <div id="elipse" hidden class="row ">
        <div class="col s12">
            <div class="hide-on-med-and-down col s1 big elipse1 elipse1-l margin-elipse">
                <h5 class="center">TW312</h5>
            </div>
            <div class="hide-on-small-and-down col s2 big2 elipse2 elipse2-l margin-elipse">
                <h3 class="center">TW313</h3>
            </div>
            <div id="static" style="display: none;" class=" col s3 big3 elipse3 margin-elipse">
            </div>
            <h2 id="e5" class="center ticket">TW314</h2>
            <div id="loader" class="col s3 margin-elipse">
                <div class="preloader-wrapper big3 active">
                    <div class="spinner-layer spinner-blue-only">
                        <div class="circle-clipper left">
                            <div class="circle"></div>
                        </div>
                        <div class="gap-patch">
                            <div class="circle"></div>
                        </div>
                        <div class="circle-clipper right">
                            <div class="circle"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="hide-on-small-and-down col s2 elipse2 elipse2-r margin-elipse">
                <h3 class="center">TW315</h3>
            </div>
            <div class="hide-on-med-and-down col s1 elipse1 elipse1-r margin-elipse">
                <h5 class="center">TW316</h5>
            </div>
        </div>
    </div>
    <div class="row" id="msg">
        <div class="col s12 margin-first">
            <h1 class="secundaria2_text light center-align">Clique em <i class="fa fa-play-circle-o font80" aria-hidden="true"></i> para iniciar a fila </h1>
        </div>
    </div>
    <div class="row">
        <div class="col s2 m8 center-align">
            <p class="uppercase font18">Progresso do atendimento</p>
            <i id="hourglass" class="hide-on-small-and-down fa fa-hourglass-o fa-5x fa-fw secundaria1_text" aria-hidden="true"></i>
            <span class="sr-only">Loading...</span>
            <input id="clockface" disabled class="secundaria1_text font18 center clockface" placeholder="00:00:000">
        </div>
        <div class="col s10 m4 right">
            <div class="row ">
                <button id="start" onclick="Materialize.toast('Atendimento Iniciado', 2000)" disabled class="btn btn-large waves-effect waves-light right col s9 font18" type="button" name="action"><span class="center">Iniciar Atendimento</span> <i class="right fa fa-play" aria-hidden="true"></i> </button>
            </div>
            <div class="row">
                <button id="reset" disabled class="btn btn-large waves-effect waves-light right col s9 font18" onclick="Materialize.toast('Atendimento Finalizado', 1500);Materialize.toast('Chamando cliente', 2000);" type="button" name="action"><span class="center">Finalizar Atendimento</span> <i class="right fa fa-stop" aria-hidden="true"></i> </button>
            </div>
        </div>
    </div>
    <script type="text/javascript" src="{% static "js/tock.js" %}"></script>
    <!-- Scripts -->
    <script>
        $(document).ready(function(){
            $('.tooltipped').tooltip({delay: 40});
        });
    </script>
    <script>
        window.onload = function() {
            function t() {
                Materialize.toast('Chamando cliente novamente', 2000);
            }
            $('#play').on('click', function () {
                $("#play").hide("fast");
                $("#paus").show("fast");
                $("#msg").hide("fast");
                $("#elipse").show("fast");
                $("#paus").removeClass("hide");
                $("#start").prop( "disabled", false );
                $("#sair").prop( "disabled", true );
                var i = 1;
                for (i=1;i<=2; i++){
                    setTimeout(t, (i*30000));
                }
            });

            $('#paus').on('click', function () {
                $("#play").show("fast");
                $("#paus").hide("fast");
                $("#start").prop( "disabled", true );
                $("#sair").prop( "disabled", false );
                $("#msg").show("fast");
                $("#elipse").hide("fast");
            });

            var timer = new Tock({
                callback: function () {
                    $('#clockface').val(timer.msToTime(timer.lap()));
                }
            });

            $('#start').on('click', function () {
                timer.start($('#clockface').val());
                $("#hourglass").addClass("fa-spin");
                $( "#start" ).prop( "disabled", true );
                $( "#reset" ).prop( "disabled", false );
                $( "#paus" ).prop( "disabled", true );
                document.getElementById("loader").style.display = "none";
                document.getElementById("static").style.display = "inline-block";
            });

            $('#lap').on('click', function () {
                $('#laptimes').append(timer.msToTime(timer.lap()) + '<br>');
            });

            $('#pause').on('click', function () {
                timer.pause();
            });

            $('#stop').on('click', function () {
                timer.stop();
            });

            $('#reset').on('click', function () {
                timer.reset();
                $('#clockface').val('');
                $('#laptimes').html('');
                $("#hourglass").removeClass("fa-spin");
                $( "#start" ).prop( "disabled", false );
                $( "#reset" ).prop( "disabled", true );
                $( "#paus" ).prop( "disabled", false );
                document.getElementById("static").style.display = "none";
                document.getElementById("loader").style.display = "inline-block";
                var i = 1;
                for (i=1;i<=2; i++){
                    setTimeout(t, (i*30000));
                }
                $('#e5').val('TW'+(i+1));
            });
        }
    </script>
{% endblock %}